#!/usr/bin/env python

import rospy
import tf


if __name__ == '__main__':
    rospy.init_node("ndt_pose_listener")
    listener = tf.TranformListener()
    rate = rospy.Rate(1.)

    while not rospy.is_shutdown():
        if listener.frameExists("/map") and listener.frameExists("/car"):
            t = listener.getLatestCommonTime("/car", "/map")
            trans, rot = listener.lookupTransform("/car", "/map", t)
            print(f"At {t}, get translation: {trans}, quat: {rot}")
        rate.sleep()

    ros.spin()
